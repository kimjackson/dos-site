mkdir /var/www/htdocs/dos-static-<yyyy-mm-dd>
cd !$
git clone /var/www/pub/relbrowser.git repo
cd repo
git checkout -b dos-site --track origin/dos-site
git checkout -b dos-site-deploy-<yyyy-mm-dd>

# apply changes needed to make this a static site
git apply dos-site-to-static-patch.txt

####### check js files for changes ##########
#diff -wBy  --suppress-common-lines js ../../dos-static-<last yyyy-mm-dd>/repo/js
#diff -wBy  --suppress-common-lines -x urlmap* xsl ../../dos-static-<last yyyy-mm-dd>/repo/xsl
##### if difference resolve code and commit changes to repo and push to main repo

# changing saved dates  dos-static-yyyy-mm-dd to the new dos-static-<last yyyy-mm-dd>
# ********* UPDATE DATES in deploy/generate.sh ************
# ********* UPDATE DATES in xsl/myvariables.xsl ***********
# ********* UPDATE DATES in ./dossearch.zcfg ***********

####### check js files for changes ##########
#diff -wBy  --suppress-common-lines js ../../dos-static-<last yyyy-mm-dd>/repo/js
#diff -wBy  --suppress-common-lines -x urlmap* xsl ../../dos-static-<last yyyy-mm-dd>/repo/xsl
##### should only show date changes

# stage all changes to be committed
git add -u
git commit -m'Static version.'

#push these to the bare repo
#git push origin dos-site-deploy-<yyyy-mm-dd>
# which is the same as
#git push origin dos-site-deploy-<yyyy-mm-dd>:refs/heads/dos-site-deploy-<yyyy-mm-dd>

# add a line to /opt/cocoon/mount-table.xml so that the generate.sh script can use cocoon to generate output.
#  <mount uri-prefix="dos-static-<yyyy-mm-dd>/" src="http://heuristscholar.org/dos-static-<yyyy-mm-dd>/repo/"/>
# just duplicate one of the existing ones and change it to the new static dir on heurist

cd ..
# start running sections of repo/deploy/generate.sh
