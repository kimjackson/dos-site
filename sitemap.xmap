<?xml version="1.0" encoding="UTF-8"?>
<map:sitemap xmlns:map="http://apache.org/cocoon/sitemap/1.0">

 <map:views>
  <map:view from-label="xmlexport" name="raw">
   <map:serialize type="xml"/>
  </map:view>
  <map:view from-label="transformed" name="transformed">
   <map:serialize type="xml"/>
  </map:view>
  <map:view from-label="wordml" name="wordml">
   <map:serialize type="xml"/>
  </map:view>
  <map:view from-label="tei" name="tei">
   <map:serialize type="xml"/>
  </map:view>
  <map:view from-label="tei-only" name="tei-only">
   <map:transform src="xsl/tei_only.xsl"/>
   <map:serialize type="xml"/>
  </map:view>
  <map:view from-label="html" name="html">
   <map:serialize type="xml"/>
  </map:view>
 </map:views>


 <map:resources>
  <map:resource name="preview">
   <map:generate src="cocoon:/xml0/{id}"/>
   <map:transform src="xsl/preview-standalone.xsl">
    <map:parameter name="context" value="{context}"/>
   </map:transform>
   <map:serialize type="html"/>
  </map:resource>
 </map:resources>


 <map:pipelines>
  <map:pipeline>

   <map:match pattern="xml0/*">
    <map:generate src="http://dos-sandbox.heuristscholar.org/heurist/php/xmlexport.php?q=ids:{1}&amp;w=all&amp;rev=yes&amp;related_details=160,169,174,177,178,191,199,202,291,223,221,230,289,323,324,325,326,327,328,329,330,526,529,569&amp;depth=0"/>
    <map:serialize type="xml"/>
   </map:match>

   <map:match pattern="xml1/*">
    <map:generate src="http://dos-sandbox.heuristscholar.org/heurist/php/xmlexport.php?q=ids:{1}&amp;w=all&amp;rev=yes&amp;related_details=160,169,174,177,178,191,291,223,221,230,289,323,324,325,326,327,328,329,330,508,523,526,529,569&amp;depth=1"/>
    <map:serialize type="xml"/>
   </map:match>

   <map:match pattern="item/*/raw">
    <map:redirect-to uri="../{1}?cocoon-view=raw"/>
   </map:match>

   <map:match pattern="item/*/transformed">
    <map:redirect-to uri="../{1}?cocoon-view=transformed"/>
   </map:match>

   <map:match pattern="item/*/wordml">
    <map:redirect-to uri="../{1}?cocoon-view=wordml"/>
   </map:match>

   <map:match pattern="item/*/">
    <map:redirect-to uri="../{1}"/>
   </map:match>

   <map:match pattern="item/*">
    <map:generate src="cocoon:/xml1/{1}" label="xmlexport"/>
    <map:transform src="xsl/item_view.xsl" label="transformed"/>
    <map:transform type="xinclude" label="wordml"/>
    <map:transform src="xsl/wordml2TEI.xsl" label="tei"/>
    <map:transform src="xsl/tei_to_html_basic.xsl" label="html"/>
    <map:transform src="xsl/entry_index.xsl"/>
    <map:serialize type="html"/>
   </map:match>

   <map:match pattern="preview/*c*">
    <map:call resource="preview">
	 <map:parameter name="id" value="{1}"/>
	 <map:parameter name="context" value="{2}"/>
	</map:call>
   </map:match>

   <map:match pattern="preview/*">
    <map:call resource="preview">
	 <map:parameter name="id" value="{1}"/>
	</map:call>
   </map:match>

   <map:match pattern="popup/*">
    <map:generate src="cocoon:/xml0/{1}"/>
    <map:transform src="xsl/popup.xsl"/>
    <map:serialize type="html"/>
   </map:match>

   <map:match pattern="kml/full/*">
    <map:generate src="http://dos-sandbox.heuristscholar.org/heurist/mapper/googleearth.kml.php?multilevel=false&amp;w=all&amp;q=linkto:{1}+type:150"/>
    <map:serialize type="xml"/>
   </map:match>

   <map:match pattern="kml/summary/*">
    <map:generate src="http://dos-sandbox.heuristscholar.org/heurist/mapper/googleearth.kml.php?multilevel=false&amp;w=all&amp;q=linkto:{1}+type:150+f:526=TimePlace"/>
    <map:serialize type="xml"/>
   </map:match>

   <map:match pattern="kml/full/rename/*">
    <map:aggregate element="data">
	 <map:part src="cocoon:/kml/full/{1}"/>
	 <map:part src="cocoon:/xml1/{1}"/>
    </map:aggregate>
    <map:transform src="xsl/kml_rename.xsl"/>
    <map:serialize type="xml"/>
   </map:match>

   <map:match pattern="kml/summary/rename/*">
    <map:aggregate element="data">
	 <map:part src="cocoon:/kml/summary/{1}"/>
	 <map:part src="cocoon:/item/{1}?cocoon-view=raw"/>
    </map:aggregate>
    <map:transform src="xsl/kml_rename.xsl"/>
    <map:serialize type="xml"/>
   </map:match>

   <map:match pattern="kmlfile/*">
    <map:generate src="http://dos-sandbox.heuristscholar.org/heurist/php/kml.php?id={1}"/>
    <map:serialize type="xml"/>
   </map:match>

   <map:match pattern="browse/*">
    <map:generate src="empty.xml"/>		<!-- dummy source for our "transform" -->
    <map:transform src="xsl/browse.xsl">
     <map:parameter name="type" value="{1}"/>
    </map:transform>
    <map:serialize type="html"/>
   </map:match>

  </map:pipeline>
 </map:pipelines>
</map:sitemap>
